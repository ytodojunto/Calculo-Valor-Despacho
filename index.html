<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Pilotaje 2024</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; padding: 20px; font-family: 'Segoe UI', sans-serif; padding-bottom: 80px; }
        .main-card { max-width: 800px; margin: 0 auto; border: none; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); background: white; overflow: hidden; }
        
        /* Header Institucional */
        .header-bg { background: linear-gradient(135deg, #8B0000 0%, #a71d2a 100%); color: white; padding: 20px; text-align: center; }
        .badge-tarif { background: #ffc107; color: #000; padding: 4px 12px; border-radius: 4px; font-weight: 800; font-size: 0.85rem; letter-spacing: 1px; display: inline-block; margin-top: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        
        .section-title { color: #8B0000; font-weight: 800; text-transform: uppercase; border-bottom: 2px solid #eee; margin: 25px 0 15px 0; font-size: 0.9rem; }
        
        /* Botones Selecci칩n */
        .btn-mode { border: 2px solid #e9ecef; border-radius: 10px; padding: 12px; width: 100%; text-align: center; cursor: pointer; transition: 0.2s; background: white; color: #555; }
        .btn-mode:hover { background: #fff5f5; border-color: #8B0000; }
        .btn-mode.active { background: #8B0000; color: white; border-color: #8B0000; box-shadow: 0 4px 12px rgba(139, 0, 0, 0.2); }

        /* Visor Distancia */
        .dist-display { background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 10px; padding: 15px; text-align: right; }
        .dist-val { font-size: 2rem; font-weight: 800; color: #8B0000; line-height: 1; }

        /* Boton Principal */
        .btn-calc { background: #8B0000; color: white; border: none; width: 100%; padding: 16px; border-radius: 10px; font-size: 1.2rem; font-weight: 800; margin-top: 30px; transition: 0.2s; }
        .btn-calc:hover { background: #6b0000; }

        /* Panel Resultados */
        .result-panel { background: white; border: 1px solid #e5e7eb; border-left: 8px solid #8B0000; padding: 0; border-radius: 8px; margin-top: 30px; display: none; overflow: hidden; }
        .res-header { background: #f8f9fa; padding: 15px 25px; border-bottom: 1px solid #e5e7eb; font-weight: bold; color: #555; }
        .res-body { padding: 20px 25px; }
        
        .subtotal-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-top: 1px dashed #ccc; margin-top: 10px; font-size: 1.1rem; }
        .subtotal-label { font-weight: 700; color: #444; }
        .subtotal-val { font-weight: 800; color: #333; }
        
        .final-row { background: #8B0000; color: white; padding: 20px 25px; display: flex; justify-content: space-between; align-items: center; }
        .final-label { font-size: 1.2rem; font-weight: 700; text-transform: uppercase; }
        .final-price { font-size: 2rem; font-weight: 800; }

        .discount-row { color: #198754; font-weight: bold; font-size: 0.95rem; background-color: #f0fff4; padding: 5px 10px; border-radius: 5px; margin: 10px 0; border: 1px solid #c3e6cb; }

        /* Footer Version */
        .app-version { text-align: center; margin-top: 30px; color: #6c757d; font-size: 0.9rem; font-weight: bold; opacity: 0.8; border-top: 1px solid #ddd; padding-top: 10px; }
    </style>
</head>
<body>

<div class="main-card">
    <div class="header-bg">
        <h3 class="m-0 fw-bold">CALCULADORA PILOTAJE</h3>
        <span class="badge-tarif">TARIFA ABRIL 2024</span>
    </div>

    <div class="p-4">
        
        <div class="section-title">1. Coeficiente Fiscal (UF)</div>
        <div class="row g-2 mb-3">
            <div class="col-6">
                <div class="btn-mode active" id="btnModeDim" onclick="setMode('dim')">
                    <strong>游늺 Dimensiones</strong>
                </div>
            </div>
            <div class="col-6">
                <div class="btn-mode" id="btnModeCoef" onclick="setMode('coef')">
                    <strong>游댝 Coef. Directo</strong>
                </div>
            </div>
        </div>

        <div id="panelDim" class="row g-2">
            <div class="col-4"><input type="number" id="eslora" class="form-control text-center fw-bold" placeholder="Eslora"></div>
            <div class="col-4"><input type="number" id="manga" class="form-control text-center fw-bold" placeholder="Manga"></div>
            <div class="col-4"><input type="number" id="puntal" class="form-control text-center fw-bold" placeholder="Puntal"></div>
        </div>
        <div id="panelCoef" class="d-none">
            <input type="number" id="ufDirecto" class="form-control text-center fw-bold fs-5" placeholder="Ingrese UF (Ej: 115)">
        </div>

        <div class="section-title">2. Ruta y Distancia (Tabla Oficial)</div>
        <div class="row g-2 mb-3">
            <div class="col-6">
                <div class="btn-mode active" id="btnRutaMitre" onclick="setRuta('mitre')">
                    <strong>V칤a Emilio Mitre</strong>
                </div>
            </div>
            <div class="col-6">
                <div class="btn-mode" id="btnRutaMG" onclick="setRuta('mg')">
                    <strong>V칤a Mart칤n Garc칤a</strong>
                </div>
            </div>
        </div>

        <div class="row g-2 mb-3">
            <div class="col-12">
                <label class="small text-muted fw-bold">Origen</label>
                <select id="selOrigen" class="form-select fw-bold" onchange="calcDist()"></select>
            </div>
            <div class="col-12">
                <label class="small text-muted fw-bold">Destino</label>
                <select id="selDestino" class="form-select fw-bold" onchange="calcDist()"></select>
            </div>
        </div>

        <div class="dist-display">
            <span class="small text-muted fw-bold">DISTANCIA EXACTA</span>
            <div class="dist-val"><span id="lblKm">0.0</span> <span style="font-size:1rem; color:#666">KM</span></div>
            <div id="msgError" class="text-danger small fw-bold mt-1"></div>
        </div>

        <div class="section-title">3. Variables Operativas</div>
        <div class="row g-2">
            <div class="col-4">
                <label class="small text-muted fw-bold">Calado (m)</label>
                <input type="number" id="calado" class="form-control text-center fw-bold" placeholder="9.80">
            </div>
            <div class="col-4">
                <label class="small text-muted fw-bold">Pr치cticos</label>
                <input type="number" id="practicos" class="form-control text-center fw-bold" value="1">
            </div>
            <div class="col-4">
                <label class="small text-muted fw-bold">Demora (hs)</label>
                <input type="number" id="demora" class="form-control text-center fw-bold" value="0">
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-12">
                <div class="form-check bg-light p-3 rounded border mb-2">
                    <input class="form-check-input ms-1" type="checkbox" id="checkArg" style="transform: scale(1.3)">
                    <label class="form-check-label fw-bold ms-3 pt-1 text-primary" for="checkArg">
                        游뷣릖 Buque Bandera Argentina (-25%)
                    </label>
                </div>
            </div>
            <div class="col-12">
                <div class="form-check bg-light p-3 rounded border">
                    <input class="form-check-input ms-1" type="checkbox" id="checkUru" style="transform: scale(1.3)">
                    <label class="form-check-label fw-bold ms-3 pt-1" for="checkUru">
                        Adicional Puerto Uruguayo (+ USD 2.500)
                    </label>
                </div>
            </div>
        </div>

        <button class="btn-calc shadow" onclick="calcular()">CALCULAR PRECIO FINAL</button>

        <div id="resultados" class="result-panel">
            <div class="res-header">DETALLE DE LIQUIDACI칍N</div>
            
            <div class="res-body">
                <small class="text-muted fw-bold text-uppercase">A. Servicios de Pilotaje</small>
                <div class="d-flex justify-content-between mb-1 mt-2">
                    <span>Fiscal (<span id="rUF">0</span> UF x <span id="rPracA">1</span> pr):</span> <span>USD <span id="rFiscal">0.00</span></span>
                </div>
                <div class="d-flex justify-content-between mb-1">
                    <span>Recorrido (<span id="rKM">0</span> km x <span id="rPracB">1</span> pr):</span> <span>USD <span id="rRecorrido">0.00</span></span>
                </div>
                <div class="d-flex justify-content-between mb-1 text-danger">
                    <span>Recargo Calado (<span id="rPct">0</span>%):</span> <span>USD <span id="rCalado">0.00</span></span>
                </div>
                <div class="d-flex justify-content-between mb-1">
                    <span>Demora (<span id="rHorasDemora">0</span> hs x <span id="rPracDemora">1</span> pr):</span> <span>USD <span id="rDemora">0.00</span></span>
                </div>
                
                <div id="rowDescArg" class="d-flex justify-content-between align-items-center mb-1 discount-row d-none">
                    <span>游뷣릖 Desc. Bandera Arg. (-25%):</span> <span>- USD <span id="rDescArg">0.00</span></span>
                </div>
                
                <div class="subtotal-row">
                    <span class="subtotal-label">TOTAL SERVICIOS (NETO):</span>
                    <span class="subtotal-val">USD <span id="totalServicio">0.00</span></span>
                </div>

                <small class="text-muted fw-bold text-uppercase d-block mt-4">B. Posicionamiento (Gastos)</small>
                <div class="d-flex justify-content-between mb-1 mt-2">
                    <span>Traslados/Ordenanza (x<span id="rPracGastos">1</span>):</span> <span>USD <span id="rGastos">0.00</span></span>
                </div>
                <div class="d-flex justify-content-between mb-1">
                    <span>Adic. Uruguay:</span> <span>USD <span id="rUru">0.00</span></span>
                </div>

                <div class="subtotal-row">
                    <span class="subtotal-label">TOTAL POSICIONAMIENTO:</span>
                    <span class="subtotal-val">USD <span id="totalPosicionamiento">0.00</span></span>
                </div>
            </div>

            <div class="final-row">
                <span class="final-label">TOTAL GENERAL</span>
                <span class="final-price">USD <span id="rTotal">0.00</span></span>
            </div>
        </div>

    </div>
</div>

<div class="app-version">Versi칩n 20.0 - Matriz Completa 2024 - Bandera Arg</div>

<script>
    // --- 1. BASE DE DATOS COMPLETA (GENERADA DE TUS ARCHIVOS) ---
    const PORT_LIST = ["ALVEAR KM 406", "ATUCHA KM", "CAMPANA KM 94", "DEL GUAZU", "DELTA DOCK KM 132", "DIAMANTE", "ESCOBAR KM 60", "GRAL LAGOS", "IBICUY", "KM 171", "LAS PALMAS KM 132", "MARTIN KM 331", "MAZARUCA", "NUEVA PALMIRA", "PARANA", "RAMALLO KM 325", "RECALADA", "ROSARIO 412", "ROSARIO NORTE KM 420", "S LORE DESEM 448", "S LORE SUR", "S LOREN SUR", "S. MARTIN KM 455", "SAN NICOLAS SUR", "SAN PEDRO KM 273", "SANTA FE", "TIMBUES KM 450", "TIMBUES KM 456420", "VGG KM 408", "VILLA CONST KM 362", "ZARATE KM 110", "ZONA COMUN KM 52"];

    const MITRE_DATA = {"RECALADA__ZONA COMUN KM 52": 187.0, "ESCOBAR KM 60__RECALADA": 290.0, "CAMPANA KM 94__RECALADA": 315.0, "RECALADA__ZARATE KM 110": 330.0, "LAS PALMAS KM 132__RECALADA": 336.0, "DELTA DOCK KM 132__RECALADA": 351.0, "ATUCHA KM__RECALADA": 353.0, "NUEVA PALMIRA__RECALADA": 520.0, "KM 171__RECALADA": 473.0, "DEL GUAZU__RECALADA": 478.0, "IBICUY__RECALADA": 516.0, "MAZARUCA__RECALADA": 532.0, "RECALADA__SAN PEDRO KM 273": 444.0, "RAMALLO KM 325__RECALADA": 496.0, "MARTIN KM 331__RECALADA": 500.0, "RECALADA__SAN NICOLAS SUR": 514.0, "RECALADA__VILLA CONST KM 362": 532.0, "GRAL LAGOS__RECALADA": 565.0, "ALVEAR KM 406__RECALADA": 576.0, "RECALADA__ROSARIO 412": 581.0, "RECALADA__ROSARIO NORTE KM 420": 591.0, "RECALADA__S LOREN SUR": 612.0, "RECALADA__S LORE DESEM 448": 617.0, "RECALADA__S. MARTIN KM 455": 624.0, "RECALADA__TIMBUES KM 450": 629.0, "DIAMANTE__RECALADA": 704.0, "RECALADA__SANTA FE": 746.0, "PARANA__RECALADA": 752.0, "ESCOBAR KM 60__ZONA COMUN KM 52": 103.0, "CAMPANA KM 94__ZONA COMUN KM 52": 128.0, "ZARATE KM 110__ZONA COMUN KM 52": 143.0, "LAS PALMAS KM 132__ZONA COMUN KM 52": 154.0, "DELTA DOCK KM 132__ZONA COMUN KM 52": 164.0, "ATUCHA KM__ZONA COMUN KM 52": 167.0, "NUEVA PALMIRA__ZONA COMUN KM 52": 333.0, "KM 171__ZONA COMUN KM 52": 287.0, "DEL GUAZU__ZONA COMUN KM 52": 287.0, "IBICUY__ZONA COMUN KM 52": 332.0, "MAZARUCA__ZONA COMUN KM 52": 348.0, "SAN PEDRO KM 273__ZONA COMUN KM 52": 256.0, "RAMALLO KM 325__ZONA COMUN KM 52": 308.0, "MARTIN KM 331__ZONA COMUN KM 52": 312.0, "SAN NICOLAS SUR__ZONA COMUN KM 52": 326.0, "VILLA CONST KM 362__ZONA COMUN KM 52": 344.0, "GRAL LAGOS__ZONA COMUN KM 52": 377.0, "ALVEAR KM 406__ZONA COMUN KM 52": 388.0, "ROSARIO 412__ZONA COMUN KM 52": 393.0, "ROSARIO NORTE KM 420__ZONA COMUN KM 52": 403.0, "S LOREN SUR__ZONA COMUN KM 52": 424.0, "S LORE DESEM 448__ZONA COMUN KM 52": 429.0, "S. MARTIN KM 455__ZONA COMUN KM 52": 436.0, "TIMBUES KM 450__ZONA COMUN KM 52": 441.0, "DIAMANTE__ZONA COMUN KM 52": 516.0, "SANTA FE__ZONA COMUN KM 52": 558.0, "PARANA__ZONA COMUN KM 52": 564.0, "CAMPANA KM 94__ESCOBAR KM 60": 32.0, "ESCOBAR KM 60__ZARATE KM 110": 37.0, "ESCOBAR KM 60__LAS PALMAS KM 132": 48.0, "DELTA DOCK KM 132__ESCOBAR KM 60": 58.0, "ATUCHA KM__ESCOBAR KM 60": 61.0, "ESCOBAR KM 60__NUEVA PALMIRA": 227.0, "ESCOBAR KM 60__KM 171": 194.0, "DEL GUAZU__ESCOBAR KM 60": 196.0, "ESCOBAR KM 60__IBICUY": 238.0, "ESCOBAR KM 60__MAZARUCA": 245.0, "ESCOBAR KM 60__SAN PEDRO KM 273": 153.0, "ESCOBAR KM 60__RAMALLO KM 325": 212.0, "ESCOBAR KM 60__MARTIN KM 331": 216.0, "ESCOBAR KM 60__SAN NICOLAS SUR": 240.0, "ESCOBAR KM 60__VILLA CONST KM 362": 258.0, "ESCOBAR KM 60__GRAL LAGOS": 291.0, "ALVEAR KM 406__ESCOBAR KM 60": 292.0, "ESCOBAR KM 60__ROSARIO 412": 297.0, "ESCOBAR KM 60__ROSARIO NORTE KM 420": 307.0, "ESCOBAR KM 60__S LOREN SUR": 328.0, "ESCOBAR KM 60__S LORE DESEM 448": 333.0, "ESCOBAR KM 60__S. MARTIN KM 455": 340.0, "ESCOBAR KM 60__TIMBUES KM 450": 345.0, "DIAMANTE__ESCOBAR KM 60": 413.0, "ESCOBAR KM 60__SANTA FE": 455.0, "ESCOBAR KM 60__PARANA": 461.0, "CAMPANA KM 94__ZARATE KM 110": 15.0, "CAMPANA KM 94__LAS PALMAS KM 132": 26.0, "CAMPANA KM 94__DELTA DOCK KM 132": 36.0, "ATUCHA KM__CAMPANA KM 94": 39.0, "CAMPANA KM 94__NUEVA PALMIRA": 209.0, "CAMPANA KM 94__KM 171": 160.0, "CAMPANA KM 94__DEL GUAZU": 162.0, "CAMPANA KM 94__IBICUY": 203.0, "CAMPANA KM 94__MAZARUCA": 210.0, "CAMPANA KM 94__SAN PEDRO KM 273": 126.0, "CAMPANA KM 94__RAMALLO KM 325": 178.0, "CAMPANA KM 94__MARTIN KM 331": 182.0, "CAMPANA KM 94__SAN NICOLAS SUR": 196.0, "CAMPANA KM 94__VILLA CONST KM 362": 214.0, "CAMPANA KM 94__GRAL LAGOS": 247.0, "ALVEAR KM 406__CAMPANA KM 94": 258.0, "CAMPANA KM 94__ROSARIO 412": 263.0, "CAMPANA KM 94__ROSARIO NORTE KM 420": 273.0, "CAMPANA KM 94__S LOREN SUR": 294.0, "CAMPANA KM 94__S LORE DESEM 448": 299.0, "CAMPANA KM 94__S. MARTIN KM 455": 306.0, "CAMPANA KM 94__TIMBUES KM 450": 311.0, "CAMPANA KM 94__DIAMANTE": 386.0, "CAMPANA KM 94__SANTA FE": 428.0, "CAMPANA KM 94__PARANA": 436.0, "LAS PALMAS KM 132__ZARATE KM 110": 11.0, "DELTA DOCK KM 132__ZARATE KM 110": 21.0, "ATUCHA KM__ZARATE KM 110": 24.0, "NUEVA PALMIRA__ZARATE KM 110": 194.0, "KM 171__ZARATE KM 110": 142.0, "DEL GUAZU__ZARATE KM 110": 143.0, "IBICUY__ZARATE KM 110": 186.0, "MAZARUCA__ZARATE KM 110": 193.0, "SAN PEDRO KM 273__ZARATE KM 110": 113.0, "RAMALLO KM 325__ZARATE KM 110": 165.0, "MARTIN KM 331__ZARATE KM 110": 169.0, "SAN NICOLAS SUR__ZARATE KM 110": 183.0, "VILLA CONST KM 362__ZARATE KM 110": 201.0, "GRAL LAGOS__ZARATE KM 110": 234.0, "ALVEAR KM 406__ZARATE KM 110": 245.0, "ROSARIO 412__ZARATE KM 110": 250.0, "ROSARIO NORTE KM 420__ZARATE KM 110": 260.0, "S LOREN SUR__ZARATE KM 110": 281.0, "S LORE DESEM 448__ZARATE KM 110": 283.0, "S. MARTIN KM 455__ZARATE KM 110": 290.0, "TIMBUES KM 450__ZARATE KM 110": 295.0, "DIAMANTE__ZARATE KM 110": 373.0, "SANTA FE__ZARATE KM 110": 415.0, "PARANA__ZARATE KM 110": 421.0, "DELTA DOCK KM 132__LAS PALMAS KM 132": 10.0, "ATUCHA KM__LAS PALMAS KM 132": 13.0, "LAS PALMAS KM 132__NUEVA PALMIRA": 183.0, "KM 171__LAS PALMAS KM 132": 131.0, "DEL GUAZU__LAS PALMAS KM 132": 132.0, "IBICUY__LAS PALMAS KM 132": 174.0, "LAS PALMAS KM 132__MAZARUCA": 181.0, "LAS PALMAS KM 132__SAN PEDRO KM 273": 97.0, "LAS PALMAS KM 132__RAMALLO KM 325": 149.0, "LAS PALMAS KM 132__MARTIN KM 331": 153.0, "LAS PALMAS KM 132__SAN NICOLAS SUR": 167.0, "LAS PALMAS KM 132__VILLA CONST KM 362": 185.0, "GRAL LAGOS__LAS PALMAS KM 132": 218.0, "ALVEAR KM 406__LAS PALMAS KM 132": 229.0, "LAS PALMAS KM 132__ROSARIO 412": 234.0, "LAS PALMAS KM 132__ROSARIO NORTE KM 420": 244.0, "LAS PALMAS KM 132__S LOREN SUR": 265.0, "LAS PALMAS KM 132__S LORE DESEM 448": 270.0, "LAS PALMAS KM 132__S. MARTIN KM 455": 277.0, "LAS PALMAS KM 132__TIMBUES KM 450": 282.0, "DIAMANTE__LAS PALMAS KM 132": 357.0, "LAS PALMAS KM 132__SANTA FE": 399.0, "LAS PALMAS KM 132__PARANA": 405.0, "ATUCHA KM__DELTA DOCK KM 132": 2.0, "DELTA DOCK KM 132__NUEVA PALMIRA": 173.0, "DELTA DOCK KM 132__KM 171": 121.0, "DEL GUAZU__DELTA DOCK KM 132": 122.0, "DELTA DOCK KM 132__IBICUY": 164.0, "DELTA DOCK KM 132__MAZARUCA": 171.0, "DELTA DOCK KM 132__SAN PEDRO KM 273": 92.0, "DELTA DOCK KM 132__RAMALLO KM 325": 144.0, "DELTA DOCK KM 132__MARTIN KM 331": 148.0, "DELTA DOCK KM 132__SAN NICOLAS SUR": 162.0, "DELTA DOCK KM 132__VILLA CONST KM 362": 180.0, "DELTA DOCK KM 132__GRAL LAGOS": 213.0, "ALVEAR KM 406__DELTA DOCK KM 132": 224.0, "DELTA DOCK KM 132__ROSARIO 412": 229.0, "DELTA DOCK KM 132__ROSARIO NORTE KM 420": 239.0, "DELTA DOCK KM 132__S LOREN SUR": 260.0, "DELTA DOCK KM 132__S LORE DESEM 448": 260.0, "DELTA DOCK KM 132__S. MARTIN KM 455": 267.0, "DELTA DOCK KM 132__TIMBUES KM 450": 272.0, "DELTA DOCK KM 132__DIAMANTE": 352.0, "DELTA DOCK KM 132__SANTA FE": 394.0, "DELTA DOCK KM 132__PARANA": 400.0, "ATUCHA KM__NUEVA PALMIRA": 170.0, "ATUCHA KM__KM 171": 122.0, "ATUCHA KM__DEL GUAZU": 119.0, "ATUCHA KM__IBICUY": 163.0, "ATUCHA KM__MAZARUCA": 170.0, "ATUCHA KM__SAN PEDRO KM 273": 85.0, "ATUCHA KM__RAMALLO KM 325": 137.0, "ATUCHA KM__MARTIN KM 331": 141.0, "ATUCHA KM__SAN NICOLAS SUR": 155.0, "ATUCHA KM__VILLA CONST KM 362": 173.0, "ATUCHA KM__GRAL LAGOS": 205.0, "ALVEAR KM 406__ATUCHA KM": 216.0, "ATUCHA KM__ROSARIO 412": 221.0, "ATUCHA KM__ROSARIO NORTE KM 420": 231.0, "ATUCHA KM__S LOREN SUR": 252.0, "ATUCHA KM__S LORE DESEM 448": 257.0, "ATUCHA KM__S. MARTIN KM 455": 269.0, "ATUCHA KM__TIMBUES KM 450": 269.0, "ATUCHA KM__DIAMANTE": 349.0, "ATUCHA KM__SANTA FE": 391.0, "ATUCHA KM__PARANA": 397.0, "KM 171__NUEVA PALMIRA": 47.0, "DEL GUAZU__NUEVA PALMIRA": 51.0, "IBICUY__NUEVA PALMIRA": 89.0, "MAZARUCA__NUEVA PALMIRA": 96.0, "NUEVA PALMIRA__SAN PEDRO KM 273": 149.0, "NUEVA PALMIRA__RAMALLO KM 325": 201.0, "MARTIN KM 331__NUEVA PALMIRA": 205.0, "NUEVA PALMIRA__SAN NICOLAS SUR": 219.0, "NUEVA PALMIRA__VILLA CONST KM 362": 237.0, "GRAL LAGOS__NUEVA PALMIRA": 270.0, "ALVEAR KM 406__NUEVA PALMIRA": 281.0, "NUEVA PALMIRA__ROSARIO 412": 286.0, "NUEVA PALMIRA__ROSARIO NORTE KM 420": 296.0, "NUEVA PALMIRA__S LOREN SUR": 317.0, "NUEVA PALMIRA__S LORE DESEM 448": 322.0, "NUEVA PALMIRA__S. MARTIN KM 455": 329.0, "NUEVA PALMIRA__TIMBUES KM 450": 334.0, "DIAMANTE__NUEVA PALMIRA": 409.0, "NUEVA PALMIRA__SANTA FE": 451.0, "NUEVA PALMIRA__PARANA": 457.0, "DEL GUAZU__KM 171": 4.0, "IBICUY__KM 171": 48.0, "KM 171__MAZARUCA": 65.0, "KM 171__SAN PEDRO KM 273": 104.0, "KM 171__RAMALLO KM 325": 156.0, "KM 171__MARTIN KM 331": 160.0, "KM 171__SAN NICOLAS SUR": 174.0, "KM 171__VILLA CONST KM 362": 192.0, "GRAL LAGOS__KM 171": 225.0, "ALVEAR KM 406__KM 171": 236.0, "KM 171__ROSARIO 412": 241.0, "KM 171__ROSARIO NORTE KM 420": 251.0, "KM 171__S LOREN SUR": 272.0, "KM 171__S LORE DESEM 448": 275.0, "KM 171__S. MARTIN KM 455": 282.0, "KM 171__TIMBUES KM 450": 285.0, "DIAMANTE__KM 171": 360.0, "KM 171__SANTA FE": 402.0, "KM 171__PARANA": 408.0, "DEL GUAZU__IBICUY": 38.0, "DEL GUAZU__MAZARUCA": 45.0, "DEL GUAZU__SAN PEDRO KM 273": 95.0, "DEL GUAZU__RAMALLO KM 325": 147.0, "DEL GUAZU__MARTIN KM 331": 151.0, "DEL GUAZU__SAN NICOLAS SUR": 165.0, "DEL GUAZU__VILLA CONST KM 362": 183.0, "DEL GUAZU__GRAL LAGOS": 216.0, "ALVEAR KM 406__DEL GUAZU": 227.0, "DEL GUAZU__ROSARIO 412": 232.0, "DEL GUAZU__ROSARIO NORTE KM 420": 242.0, "DEL GUAZU__S LOREN SUR": 263.0, "DEL GUAZU__S LORE DESEM 448": 268.0, "DEL GUAZU__S. MARTIN KM 455": 275.0, "DEL GUAZU__TIMBUES KM 450": 280.0, "DEL GUAZU__DIAMANTE": 355.0, "DEL GUAZU__SANTA FE": 397.0, "DEL GUAZU__PARANA": 403.0, "IBICUY__MAZARUCA": 18.0, "IBICUY__SAN PEDRO KM 273": 141.0, "IBICUY__RAMALLO KM 325": 193.0, "IBICUY__MARTIN KM 331": 197.0, "IBICUY__SAN NICOLAS SUR": 211.0, "IBICUY__VILLA CONST KM 362": 229.0, "GRAL LAGOS__IBICUY": 262.0, "ALVEAR KM 406__IBICUY": 273.0, "IBICUY__ROSARIO 412": 278.0, "IBICUY__ROSARIO NORTE KM 420": 288.0, "IBICUY__S LOREN SUR": 309.0, "IBICUY__S LORE DESEM 448": 214.0, "IBICUY__S. MARTIN KM 455": 321.0, "IBICUY__TIMBUES KM 450": 326.0, "DIAMANTE__IBICUY": 401.0, "IBICUY__SANTA FE": 443.0, "IBICUY__PARANA": 449.0, "MAZARUCA__SAN PEDRO KM 273": 159.0, "MAZARUCA__RAMALLO KM 325": 211.0, "MARTIN KM 331__MAZARUCA": 215.0, "MAZARUCA__SAN NICOLAS SUR": 229.0, "MAZARUCA__VILLA CONST KM 362": 247.0, "GRAL LAGOS__MAZARUCA": 280.0, "ALVEAR KM 406__MAZARUCA": 291.0, "MAZARUCA__ROSARIO 412": 296.0, "MAZARUCA__ROSARIO NORTE KM 420": 306.0, "MAZARUCA__S LOREN SUR": 327.0, "MAZARUCA__S LORE DESEM 448": 332.0, "MAZARUCA__S. MARTIN KM 455": 339.0, "MAZARUCA__TIMBUES KM 450": 344.0, "DIAMANTE__MAZARUCA": 419.0, "MAZARUCA__SANTA FE": 461.0, "MAZARUCA__PARANA": 467.0, "RAMALLO KM 325__SAN PEDRO KM 273": 52.0, "MARTIN KM 331__SAN PEDRO KM 273": 56.0, "SAN NICOLAS SUR__SAN PEDRO KM 273": 70.0, "SAN PEDRO KM 273__VILLA CONST KM 362": 88.0, "GRAL LAGOS__SAN PEDRO KM 273": 121.0, "ALVEAR KM 406__SAN PEDRO KM 273": 132.0, "ROSARIO 412__SAN PEDRO KM 273": 137.0, "ROSARIO NORTE KM 420__SAN PEDRO KM 273": 147.0, "S LOREN SUR__SAN PEDRO KM 273": 168.0, "S LORE DESEM 448__SAN PEDRO KM 273": 173.0, "S. MARTIN KM 455__SAN PEDRO KM 273": 180.0, "SAN PEDRO KM 273__TIMBUES KM 450": 185.0, "DIAMANTE__SAN PEDRO KM 273": 260.0, "SAN PEDRO KM 273__SANTA FE": 302.0, "PARANA__SAN PEDRO KM 273": 308.0, "MARTIN KM 331__RAMALLO KM 325": 4.0, "RAMALLO KM 325__SAN NICOLAS SUR": 18.0, "RAMALLO KM 325__VILLA CONST KM 362": 36.0, "GRAL LAGOS__RAMALLO KM 325": 69.0, "ALVEAR KM 406__RAMALLO KM 325": 80.0, "RAMALLO KM 325__ROSARIO 412": 85.0, "RAMALLO KM 325__ROSARIO NORTE KM 420": 95.0, "RAMALLO KM 325__S LOREN SUR": 116.0, "RAMALLO KM 325__S LORE DESEM 448": 121.0, "RAMALLO KM 325__S. MARTIN KM 455": 128.0, "RAMALLO KM 325__TIMBUES KM 450": 133.0, "DIAMANTE__RAMALLO KM 325": 208.0, "RAMALLO KM 325__SANTA FE": 250.0, "PARANA__RAMALLO KM 325": 256.0, "MARTIN KM 331__SAN NICOLAS SUR": 14.0, "MARTIN KM 331__VILLA CONST KM 362": 32.0, "GRAL LAGOS__MARTIN KM 331": 65.0, "ALVEAR KM 406__MARTIN KM 331": 76.0, "MARTIN KM 331__ROSARIO 412": 81.0, "MARTIN KM 331__ROSARIO NORTE KM 420": 91.0, "MARTIN KM 331__S LOREN SUR": 112.0, "MARTIN KM 331__S LORE DESEM 448": 117.0, "MARTIN KM 331__S. MARTIN KM 455": 124.0, "MARTIN KM 331__TIMBUES KM 450": 129.0, "DIAMANTE__MARTIN KM 331": 204.0, "MARTIN KM 331__SANTA FE": 246.0, "MARTIN KM 331__PARANA": 252.0, "SAN NICOLAS SUR__VILLA CONST KM 362": 18.0, "GRAL LAGOS__SAN NICOLAS SUR": 51.0, "ALVEAR KM 406__SAN NICOLAS SUR": 62.0, "ROSARIO 412__SAN NICOLAS SUR": 67.0, "ROSARIO NORTE KM 420__SAN NICOLAS SUR": 77.0, "S LOREN SUR__SAN NICOLAS SUR": 98.0, "S LORE DESEM 448__SAN NICOLAS SUR": 103.0, "S. MARTIN KM 455__SAN NICOLAS SUR": 110.0, "SAN NICOLAS SUR__TIMBUES KM 450": 115.0, "DIAMANTE__SAN NICOLAS SUR": 189.0, "SAN NICOLAS SUR__SANTA FE": 231.0, "PARANA__SAN NICOLAS SUR": 237.0, "GRAL LAGOS__VILLA CONST KM 362": 33.0, "ALVEAR KM 406__VILLA CONST KM 362": 44.0, "ROSARIO 412__VILLA CONST KM 362": 49.0, "ROSARIO NORTE KM 420__VILLA CONST KM 362": 59.0, "S LOREN SUR__VILLA CONST KM 362": 80.0, "S LORE DESEM 448__VILLA CONST KM 362": 87.0, "S. MARTIN KM 455__VILLA CONST KM 362": 94.0, "TIMBUES KM 450__VILLA CONST KM 362": 99.0, "DIAMANTE__VILLA CONST KM 362": 174.0, "SANTA FE__VILLA CONST KM 362": 216.0, "PARANA__VILLA CONST KM 362": 222.0, "ALVEAR KM 406__GRAL LAGOS": 11.0, "GRAL LAGOS__ROSARIO 412": 16.0, "GRAL LAGOS__ROSARIO NORTE KM 420": 26.0, "GRAL LAGOS__S LOREN SUR": 47.0, "GRAL LAGOS__S LORE DESEM 448": 54.0, "GRAL LAGOS__S. MARTIN KM 455": 61.0, "GRAL LAGOS__TIMBUES KM 450": 66.0, "DIAMANTE__GRAL LAGOS": 141.0, "GRAL LAGOS__SANTA FE": 183.0, "GRAL LAGOS__PARANA": 189.0, "ALVEAR KM 406__ROSARIO 412": 5.0, "ALVEAR KM 406__ROSARIO NORTE KM 420": 15.0, "ALVEAR KM 406__S LOREN SUR": 36.0, "ALVEAR KM 406__S LORE DESEM 448": 43.0, "ALVEAR KM 406__S. MARTIN KM 455": 50.0, "ALVEAR KM 406__TIMBUES KM 450": 55.0, "ALVEAR KM 406__DIAMANTE": 130.0, "ALVEAR KM 406__SANTA FE": 172.0, "ALVEAR KM 406__PARANA": 178.0, "ROSARIO 412__ROSARIO NORTE KM 420": 10.0, "ROSARIO 412__S LOREN SUR": 31.0, "ROSARIO 412__S LORE DESEM 448": 38.0, "ROSARIO 412__S. MARTIN KM 455": 45.0, "ROSARIO 412__TIMBUES KM 450": 50.0, "DIAMANTE__ROSARIO 412": 125.0, "ROSARIO 412__SANTA FE": 167.0, "PARANA__ROSARIO 412": 173.0, "ROSARIO NORTE KM 420__S LOREN SUR": 21.0, "ROSARIO NORTE KM 420__S LORE DESEM 448": 28.0, "ROSARIO NORTE KM 420__S. MARTIN KM 455": 33.0, "ROSARIO NORTE KM 420__TIMBUES KM 450": 38.0, "DIAMANTE__ROSARIO NORTE KM 420": 113.0, "ROSARIO NORTE KM 420__SANTA FE": 155.0, "PARANA__ROSARIO NORTE KM 420": 161.0, "S LORE DESEM 448__S LORE SUR": 5.0, "S LORE SUR__S. MARTIN KM 455": 12.0, "S LORE SUR__TIMBUES KM 450": 17.0, "DIAMANTE__S LORE SUR": 92.0, "S LORE SUR__SANTA FE": 134.0, "PARANA__S LORE SUR": 140.0, "S LORE DESEM 448__S. MARTIN KM 455": 7.0, "S LORE DESEM 448__TIMBUES KM 450": 12.0, "DIAMANTE__S LORE DESEM 448": 87.0, "S LORE DESEM 448__SANTA FE": 129.0, "PARANA__S LORE DESEM 448": 135.0, "S. MARTIN KM 455__TIMBUES KM 450": 5.0, "DIAMANTE__S. MARTIN KM 455": 80.0, "S. MARTIN KM 455__SANTA FE": 122.0, "PARANA__S. MARTIN KM 455": 128.0, "DIAMANTE__TIMBUES KM 450": 75.0, "SANTA FE__TIMBUES KM 450": 117.0, "PARANA__TIMBUES KM 450": 115.0, "DIAMANTE__SANTA FE": 42.0, "DIAMANTE__PARANA": 48.0, "PARANA__SANTA FE": 0.0};

    const MG_DATA = {"RECALADA__ZONA COMUN KM 52": 187.0, "RECALADA__NUEVA PALMIRA": 311.0, "RECALADA__KM 171": 353.0, "RECALADA__DEL GUAZU": 355.0, "RECALADA__IBICUY": 386.0, "RECALADA__MAZARUCA": 404.0, "RECALADA__SAN PEDRO KM 273": 457.0, "RAMALLO KM 325__RECALADA": 509.0, "MARTIN KM 331__RECALADA": 513.0, "RECALADA__SAN NICOLAS SUR": 527.0, "RECALADA__VILLA CONST KM 362": 545.0, "GRAL LAGOS__RECALADA": 578.0, "RECALADA__VGG KM 408": 589.0, "RECALADA__ROSARIO 412": 594.0, "RECALADA__ROSARIO NORTE KM 420": 604.0, "RECALADA__S LOREN SUR": 625.0, "RECALADA__S LORE DESEM 448": 630.0, "RECALADA__S. MARTIN KM 455": 637.0, "RECALADA__TIMBUES KM 456420": 455.0, "DIAMANTE__RECALADA": 717.0, "RECALADA__SANTA FE": 759.0, "PARANA__RECALADA": 765.0, "NUEVA PALMIRA__ZONA COMUN KM 52": 124.0, "KM 171__ZONA COMUN KM 52": 166.0, "DEL GUAZU__ZONA COMUN KM 52": 168.0, "IBICUY__ZONA COMUN KM 52": 199.0, "MAZARUCA__ZONA COMUN KM 52": 217.0, "SAN PEDRO KM 273__ZONA COMUN KM 52": 270.0, "RAMALLO KM 325__ZONA COMUN KM 52": 322.0, "MARTIN KM 331__ZONA COMUN KM 52": 326.0, "SAN NICOLAS SUR__ZONA COMUN KM 52": 340.0, "VILLA CONST KM 362__ZONA COMUN KM 52": 358.0, "GRAL LAGOS__ZONA COMUN KM 52": 391.0, "VGG KM 408__ZONA COMUN KM 52": 402.0, "ROSARIO 412__ZONA COMUN KM 52": 407.0, "ROSARIO NORTE KM 420__ZONA COMUN KM 52": 417.0, "S LOREN SUR__ZONA COMUN KM 52": 438.0, "S LORE DESEM 448__ZONA COMUN KM 52": 443.0, "S. MARTIN KM 455__ZONA COMUN KM 52": 450.0, "TIMBUES KM 456420__ZONA COMUN KM 52": 335.0, "DIAMANTE__ZONA COMUN KM 52": 530.0, "SANTA FE__ZONA COMUN KM 52": 572.0, "PARANA__ZONA COMUN KM 52": 578.0, "KM 171__NUEVA PALMIRA": 47.0, "DEL GUAZU__NUEVA PALMIRA": 49.0, "IBICUY__NUEVA PALMIRA": 95.0, "MAZARUCA__NUEVA PALMIRA": 112.0, "NUEVA PALMIRA__SAN PEDRO KM 273": 149.0, "NUEVA PALMIRA__RAMALLO KM 325": 201.0, "MARTIN KM 331__NUEVA PALMIRA": 205.0, "NUEVA PALMIRA__SAN NICOLAS SUR": 219.0, "NUEVA PALMIRA__VILLA CONST KM 362": 238.0, "GRAL LAGOS__NUEVA PALMIRA": 271.0, "NUEVA PALMIRA__VGG KM 408": 282.0, "NUEVA PALMIRA__ROSARIO 412": 287.0, "NUEVA PALMIRA__ROSARIO NORTE KM 420": 297.0, "NUEVA PALMIRA__S LOREN SUR": 318.0, "NUEVA PALMIRA__S LORE DESEM 448": 323.0, "NUEVA PALMIRA__S. MARTIN KM 455": 330.0, "NUEVA PALMIRA__TIMBUES KM 456420": 288.0, "DIAMANTE__NUEVA PALMIRA": 410.0, "NUEVA PALMIRA__SANTA FE": 452.0, "NUEVA PALMIRA__PARANA": 458.0, "DEL GUAZU__KM 171": 4.0, "IBICUY__KM 171": 38.0, "KM 171__MAZARUCA": 51.0, "KM 171__SAN PEDRO KM 273": 103.0, "KM 171__RAMALLO KM 325": 155.0, "KM 171__MARTIN KM 331": 159.0, "KM 171__SAN NICOLAS SUR": 173.0, "KM 171__VILLA CONST KM 362": 191.0, "GRAL LAGOS__KM 171": 224.0, "KM 171__VGG KM 408": 235.0, "KM 171__ROSARIO 412": 240.0, "KM 171__ROSARIO NORTE KM 420": 250.0, "KM 171__S LOREN SUR": 271.0, "KM 171__S LORE DESEM 448": 276.0, "KM 171__S. MARTIN KM 455": 283.0, "KM 171__TIMBUES KM 456420": 282.0, "DIAMANTE__KM 171": 363.0, "KM 171__SANTA FE": 405.0, "KM 171__PARANA": 411.0, "DEL GUAZU__IBICUY": 48.0, "DEL GUAZU__MAZARUCA": 66.0, "DEL GUAZU__SAN PEDRO KM 273": 97.0, "DEL GUAZU__RAMALLO KM 325": 149.0, "DEL GUAZU__MARTIN KM 331": 153.0, "DEL GUAZU__SAN NICOLAS SUR": 167.0, "DEL GUAZU__VILLA CONST KM 362": 185.0, "DEL GUAZU__GRAL LAGOS": 218.0, "DEL GUAZU__VGG KM 408": 229.0, "DEL GUAZU__ROSARIO 412": 234.0, "DEL GUAZU__ROSARIO NORTE KM 420": 244.0, "DEL GUAZU__S LOREN SUR": 265.0, "DEL GUAZU__S LORE DESEM 448": 270.0, "DEL GUAZU__S. MARTIN KM 455": 277.0, "DEL GUAZU__TIMBUES KM 456420": 326.0, "DEL GUAZU__DIAMANTE": 357.0, "DEL GUAZU__SANTA FE": 399.0, "DEL GUAZU__PARANA": 405.0, "IBICUY__MAZARUCA": 18.0, "IBICUY__SAN PEDRO KM 273": 141.0, "IBICUY__RAMALLO KM 325": 193.0, "IBICUY__MARTIN KM 331": 197.0, "IBICUY__SAN NICOLAS SUR": 211.0, "IBICUY__VILLA CONST KM 362": 229.0, "GRAL LAGOS__IBICUY": 262.0, "IBICUY__VGG KM 408": 273.0, "IBICUY__ROSARIO 412": 278.0, "IBICUY__ROSARIO NORTE KM 420": 288.0, "IBICUY__S LOREN SUR": 309.0, "IBICUY__S LORE DESEM 448": 314.0, "IBICUY__S. MARTIN KM 455": 321.0, "IBICUY__TIMBUES KM 456420": 344.0, "DIAMANTE__IBICUY": 401.0, "IBICUY__SANTA FE": 443.0, "IBICUY__PARANA": 449.0, "MAZARUCA__SAN PEDRO KM 273": 159.0, "MAZARUCA__RAMALLO KM 325": 211.0, "MARTIN KM 331__MAZARUCA": 215.0, "MAZARUCA__SAN NICOLAS SUR": 229.0, "MAZARUCA__VILLA CONST KM 362": 247.0, "GRAL LAGOS__MAZARUCA": 280.0, "MAZARUCA__VGG KM 408": 291.0, "MAZARUCA__ROSARIO 412": 296.0, "MAZARUCA__ROSARIO NORTE KM 420": 306.0, "MAZARUCA__S LOREN SUR": 327.0, "MAZARUCA__S LORE DESEM 448": 332.0, "MAZARUCA__S. MARTIN KM 455": 339.0, "MAZARUCA__TIMBUES KM 456420": 344.0, "DIAMANTE__MAZARUCA": 419.0, "MAZARUCA__SANTA FE": 461.0, "MAZARUCA__PARANA": 467.0, "RAMALLO KM 325__SAN PEDRO KM 273": 52.0, "MARTIN KM 331__SAN PEDRO KM 273": 56.0, "SAN NICOLAS SUR__SAN PEDRO KM 273": 70.0, "SAN PEDRO KM 273__VILLA CONST KM 362": 88.0, "GRAL LAGOS__SAN PEDRO KM 273": 121.0, "SAN PEDRO KM 273__VGG KM 408": 132.0, "ROSARIO 412__SAN PEDRO KM 273": 137.0, "ROSARIO NORTE KM 420__SAN PEDRO KM 273": 147.0, "S LOREN SUR__SAN PEDRO KM 273": 168.0, "S LORE DESEM 448__SAN PEDRO KM 273": 173.0, "S. MARTIN KM 455__SAN PEDRO KM 273": 180.0, "SAN PEDRO KM 273__TIMBUES KM 456420": 185.0, "DIAMANTE__SAN PEDRO KM 273": 260.0, "SAN PEDRO KM 273__SANTA FE": 302.0, "PARANA__SAN PEDRO KM 273": 308.0, "MARTIN KM 331__RAMALLO KM 325": 4.0, "RAMALLO KM 325__SAN NICOLAS SUR": 18.0, "RAMALLO KM 325__VILLA CONST KM 362": 36.0, "GRAL LAGOS__RAMALLO KM 325": 69.0, "RAMALLO KM 325__VGG KM 408": 80.0, "RAMALLO KM 325__ROSARIO 412": 85.0, "RAMALLO KM 325__ROSARIO NORTE KM 420": 95.0, "RAMALLO KM 325__S LOREN SUR": 116.0, "RAMALLO KM 325__S LORE DESEM 448": 121.0, "RAMALLO KM 325__S. MARTIN KM 455": 154.0, "RAMALLO KM 325__TIMBUES KM 456420": 161.0, "DIAMANTE__RAMALLO KM 325": 236.0, "RAMALLO KM 325__SANTA FE": 278.0, "PARANA__RAMALLO KM 325": 284.0, "MARTIN KM 331__SAN NICOLAS SUR": 14.0, "MARTIN KM 331__VILLA CONST KM 362": 32.0, "GRAL LAGOS__MARTIN KM 331": 65.0, "MARTIN KM 331__VGG KM 408": 76.0, "MARTIN KM 331__ROSARIO 412": 81.0, "MARTIN KM 331__ROSARIO NORTE KM 420": 91.0, "MARTIN KM 331__S LOREN SUR": 112.0, "MARTIN KM 331__S LORE DESEM 448": 117.0, "MARTIN KM 331__S. MARTIN KM 455": 124.0, "MARTIN KM 331__TIMBUES KM 456420": 129.0, "DIAMANTE__MARTIN KM 331": 204.0, "MARTIN KM 331__SANTA FE": 246.0, "MARTIN KM 331__PARANA": 252.0, "SAN NICOLAS SUR__VILLA CONST KM 362": 18.0, "GRAL LAGOS__SAN NICOLAS SUR": 51.0, "SAN NICOLAS SUR__VGG KM 408": 56.0, "ROSARIO 412__SAN NICOLAS SUR": 61.0, "ROSARIO NORTE KM 420__SAN NICOLAS SUR": 72.0, "S LOREN SUR__SAN NICOLAS SUR": 93.0, "S LORE DESEM 448__SAN NICOLAS SUR": 98.0, "S. MARTIN KM 455__SAN NICOLAS SUR": 115.0, "SAN NICOLAS SUR__TIMBUES KM 456420": 120.0, "DIAMANTE__SAN NICOLAS SUR": 195.0, "SAN NICOLAS SUR__SANTA FE": 237.0, "PARANA__SAN NICOLAS SUR": 242.0, "GRAL LAGOS__VILLA CONST KM 362": 33.0, "VGG KM 408__VILLA CONST KM 362": 44.0, "ROSARIO 412__VILLA CONST KM 362": 49.0, "ROSARIO NORTE KM 420__VILLA CONST KM 362": 59.0, "S LOREN SUR__VILLA CONST KM 362": 80.0, "S LORE DESEM 448__VILLA CONST KM 362": 85.0, "S. MARTIN KM 455__VILLA CONST KM 362": 92.0, "TIMBUES KM 456420__VILLA CONST KM 362": 97.0, "DIAMANTE__VILLA CONST KM 362": 172.0, "SANTA FE__VILLA CONST KM 362": 214.0, "PARANA__VILLA CONST KM 362": 220.0, "GRAL LAGOS__VGG KM 408": 11.0, "GRAL LAGOS__ROSARIO 412": 16.0, "GRAL LAGOS__ROSARIO NORTE KM 420": 26.0, "GRAL LAGOS__S LOREN SUR": 47.0, "GRAL LAGOS__S LORE DESEM 448": 52.0, "GRAL LAGOS__S. MARTIN KM 455": 59.0, "GRAL LAGOS__TIMBUES KM 456420": 64.0, "DIAMANTE__GRAL LAGOS": 139.0, "GRAL LAGOS__SANTA FE": 181.0, "GRAL LAGOS__PARANA": 187.0, "ROSARIO 412__VGG KM 408": 5.0, "ROSARIO NORTE KM 420__VGG KM 408": 15.0, "S LOREN SUR__VGG KM 408": 36.0, "S LORE DESEM 448__VGG KM 408": 41.0, "S. MARTIN KM 455__VGG KM 408": 48.0, "TIMBUES KM 456420__VGG KM 408": 53.0, "DIAMANTE__VGG KM 408": 128.0, "SANTA FE__VGG KM 408": 170.0, "PARANA__VGG KM 408": 176.0, "ROSARIO 412__ROSARIO NORTE KM 420": 10.0, "ROSARIO 412__S LOREN SUR": 31.0, "ROSARIO 412__S LORE DESEM 448": 36.0, "ROSARIO 412__S. MARTIN KM 455": 43.0, "ROSARIO 412__TIMBUES KM 456420": 48.0, "DIAMANTE__ROSARIO 412": 123.0, "ROSARIO 412__SANTA FE": 165.0, "PARANA__ROSARIO 412": 171.0, "ROSARIO NORTE KM 420__S LOREN SUR": 21.0, "ROSARIO NORTE KM 420__S LORE DESEM 448": 26.0, "ROSARIO NORTE KM 420__S. MARTIN KM 455": 33.0, "ROSARIO NORTE KM 420__TIMBUES KM 456420": 38.0, "DIAMANTE__ROSARIO NORTE KM 420": 113.0, "ROSARIO NORTE KM 420__SANTA FE": 155.0, "PARANA__ROSARIO NORTE KM 420": 161.0, "S LORE DESEM 448__S LORE SUR": 5.0, "S LORE SUR__S. MARTIN KM 455": 12.0, "S LORE SUR__TIMBUES KM 456420": 17.0, "DIAMANTE__S LORE SUR": 92.0, "S LORE SUR__SANTA FE": 134.0, "PARANA__S LORE SUR": 140.0, "S LORE DESEM 448__S. MARTIN KM 455": 7.0, "S LORE DESEM 448__TIMBUES KM 456420": 12.0, "DIAMANTE__S LORE DESEM 448": 87.0, "S LORE DESEM 448__SANTA FE": 129.0, "PARANA__S LORE DESEM 448": 135.0, "S. MARTIN KM 455__TIMBUES KM 456420": 5.0, "DIAMANTE__S. MARTIN KM 455": 80.0, "S. MARTIN KM 455__SANTA FE": 122.0, "PARANA__S. MARTIN KM 455": 128.0, "DIAMANTE__TIMBUES KM 450": 75.0, "SANTA FE__TIMBUES KM 450": 117.0, "PARANA__TIMBUES KM 450": 123.0, "DIAMANTE__SANTA FE": 42.0, "DIAMANTE__PARANA": 48.0, "PARANA__SANTA FE": 0.0};

    // --- VARIABLES GLOBALES ---
    var rutaActual = 'mitre'; 
    var modoUf = 'dim';

    // --- INICIO ---
    window.onload = function() {
        var s1 = document.getElementById("selOrigen");
        var s2 = document.getElementById("selDestino");

        PORT_LIST.forEach(function(p) {
            var o1 = document.createElement("option"); o1.value = p; o1.text = p; s1.add(o1);
            var o2 = document.createElement("option"); o2.value = p; o2.text = p; s2.add(o2);
        });

        s1.value = "S LOREN SUR";
        s2.value = "RECALADA";
        calcDist();
    };

    window.setMode = function(m) {
        modoUf = m;
        if(m === 'dim') {
            document.getElementById('btnModeDim').classList.add('active');
            document.getElementById('btnModeCoef').classList.remove('active');
            document.getElementById('panelDim').classList.remove('d-none');
            document.getElementById('panelCoef').classList.add('d-none');
        } else {
            document.getElementById('btnModeDim').classList.remove('active');
            document.getElementById('btnModeCoef').classList.add('active');
            document.getElementById('panelDim').classList.add('d-none');
            document.getElementById('panelCoef').classList.remove('d-none');
        }
    };

    window.setRuta = function(r) {
        rutaActual = r;
        if(r === 'mitre') {
            document.getElementById('btnRutaMitre').classList.add('active');
            document.getElementById('btnRutaMG').classList.remove('active');
        } else {
            document.getElementById('btnRutaMitre').classList.remove('active');
            document.getElementById('btnRutaMG').classList.add('active');
        }
        calcDist();
    };

    window.calcDist = function() {
        var p1 = document.getElementById("selOrigen").value;
        var p2 = document.getElementById("selDestino").value;
        var dist = 0;
        var found = false;

        var matrix = (rutaActual === 'mitre') ? MITRE_DATA : MG_DATA;
        
        // La clave es "Menor__Mayor" alfab칠ticamente para coincidir con la generaci칩n del Excel
        var list = [p1, p2];
        list.sort();
        var key = list[0] + "__" + list[1];

        if(matrix[key] !== undefined) {
            dist = matrix[key];
            found = true;
        }

        if(found) {
            document.getElementById("lblKm").innerText = dist.toFixed(1);
            document.getElementById("msgError").innerText = "";
        } else {
            document.getElementById("lblKm").innerText = "0.0";
            document.getElementById("msgError").innerText = "TRAMO NO ENCONTRADO EN EXCEL";
        }
        return dist;
    };

    window.calcular = function() {
        try {
            var dist = calcDist();
            if(dist === 0 && document.getElementById("selOrigen").value !== document.getElementById("selDestino").value) {
                alert("Atenci칩n: Distancia 0. Revise origen y destino.");
            }

            var practicos = parseInt(document.getElementById("practicos").value) || 1;
            var demora = parseFloat(document.getElementById("demora").value) || 0;
            var caladoM = parseFloat(document.getElementById("calado").value) || 0;
            var esUru = document.getElementById("checkUru").checked;
            var esArg = document.getElementById("checkArg").checked;

            // UF
            var uf = 0;
            if(modoUf === 'dim') {
                var e = parseFloat(document.getElementById("eslora").value) || 0;
                var m = parseFloat(document.getElementById("manga").value) || 0;
                var p = parseFloat(document.getElementById("puntal").value) || 0;
                uf = Math.ceil((e*m*p)/800);
            } else {
                uf = Math.ceil(parseFloat(document.getElementById("ufDirecto").value) || 0);
            }
            if(uf < 65) uf = 65;

            // --- A. SERVICIOS ---
            var cFiscal = (8 * uf) * practicos;
            var cRecorrido = (12 * dist) * practicos;
            var subServBase = cFiscal + cRecorrido; 

            // Calado
            var pies = caladoM * 3.28084;
            var pct = 0;
            if(pies > 28 && pies <= 30) pct = 0.075;
            else if(pies > 30 && pies <= 32) pct = 0.15;
            else if(pies > 32 && pies <= 34) pct = 0.225;
            else if(pies > 34) pct = 0.30;
            var cCalado = subServBase * pct;

            // Demora (x practico)
            var cDemora = demora * 150 * practicos;

            var totalServiciosBruto = subServBase + cCalado + cDemora;
            
            // DESCUENTO BANDERA
            var descuento = 0;
            if(esArg) {
                descuento = totalServiciosBruto * 0.25;
            }
            
            var totalServiciosNeto = totalServiciosBruto - descuento;

            // --- B. POSICIONAMIENTO ---
            var cGastos = 4980 * practicos; 
            var cUru = esUru ? 2500 : 0;
            
            var totalPosicionamiento = cGastos + cUru;

            // --- TOTAL GENERAL ---
            var totalGeneral = totalServiciosNeto + totalPosicionamiento;

            // RENDER
            document.getElementById("rUF").innerText = uf;
            document.getElementById("rPracA").innerText = practicos;
            document.getElementById("rPracB").innerText = practicos;
            document.getElementById("rPracDemora").innerText = practicos;
            document.getElementById("rPracGastos").innerText = practicos;

            document.getElementById("rKM").innerText = dist.toFixed(1);
            document.getElementById("rFiscal").innerText = cFiscal.toFixed(2);
            document.getElementById("rRecorrido").innerText = cRecorrido.toFixed(2);
            document.getElementById("rPct").innerText = (pct*100).toFixed(1);
            document.getElementById("rCalado").innerText = cCalado.toFixed(2);
            document.getElementById("rHorasDemora").innerText = demora;
            document.getElementById("rDemora").innerText = cDemora.toFixed(2);
            
            // Mostrar Descuento si aplica
            var rowDesc = document.getElementById("rowDescArg");
            if(esArg) {
                rowDesc.classList.remove("d-none");
                document.getElementById("rDescArg").innerText = descuento.toFixed(2);
            } else {
                rowDesc.classList.add("d-none");
            }
            
            document.getElementById("totalServicio").innerText = totalServiciosNeto.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});

            document.getElementById("rGastos").innerText = cGastos.toFixed(2);
            document.getElementById("rUru").innerText = cUru.toFixed(2);
            
            document.getElementById("totalPosicionamiento").innerText = totalPosicionamiento.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});

            document.getElementById("rTotal").innerText = totalGeneral.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});

            var res = document.getElementById("resultados");
            res.style.display = "block";
            res.scrollIntoView({behavior:"smooth"});

        } catch(e) {
            alert("Error: " + e.message);
        }
    };
</script>

</body>
</html>
